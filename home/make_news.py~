import feedparser


def make_news(request):
    choice_dic = {"education": 'https://www.google.com/alerts/feeds/14555555114046780351/13329697584533306830', "science": "https://www.google.com/alerts/feeds/14555555114046780351/2259895332053150712", "youth": "https://www.google.com/alerts/feeds/14555555114046780351/16372027772606344783" }
    title_dic = {"education": "Новини Освіти", "youth": 'Новини Молоді', 'science': "Новини Науки" }
    multi_feed = []
    try:
        for choice in sorted(choice_dic):
            feed = feedparser.parse(choice_dic[choice])
            for ent in feed.entries[:]:
                if len(ent['title']) < 20  or len(ent['summary']) < 20  or len(ent['link']) < 5 or len(ent['published']) <10:
                    feed.entries.remove(ent)
                    continue
                #ent['link']=ent['link'].replace("https://www.google.com/url?rct=j&sa=t&url=",'')
                ent['title'] = ent['title'].encode('utf-8')
                ent['summary'] = ent['summary'].encode('utf-8')
            multi_feed.append(feed.entries)
    except: pass
    return multi_feed
